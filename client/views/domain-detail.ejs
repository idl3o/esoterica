<%
var css = `<style>
.domain-detail-header {
    text-align: center;
    padding: 3rem 2rem 2rem;
}

.domain-detail-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.domain-detail-title {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    color: #9d4edd;
}

.domain-detail-description {
    color: #888;
    font-size: 1.1rem;
    max-width: 600px;
    margin: 0 auto;
}

.domain-stats-bar {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-top: 1.5rem;
    padding: 1rem;
    background: rgba(5, 5, 15, 0.5);
    border-radius: 8px;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
}

.domain-stats-bar .stat {
    text-align: center;
}

.domain-stats-bar .stat-value {
    font-size: 1.8rem;
    color: #00d4ff;
    font-weight: bold;
}

.domain-stats-bar .stat-label {
    font-size: 0.8rem;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.nodes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.25rem;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
}

.node-card {
    background: rgba(5, 5, 15, 0.8);
    border: 2px solid rgba(0, 212, 255, 0.2);
    border-radius: 10px;
    padding: 1.25rem;
    text-decoration: none;
    transition: all 0.3s;
    display: block;
}

.node-card:hover {
    border-color: rgba(0, 212, 255, 0.5);
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(0, 212, 255, 0.15);
}

.node-card-title {
    color: #00d4ff;
    font-size: 1.05rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    text-transform: capitalize;
}

.node-card-type {
    color: #9d4edd;
    font-size: 0.8rem;
    margin-bottom: 0.5rem;
}

.node-card-essence {
    color: #888;
    font-size: 0.9rem;
    font-style: italic;
    margin-bottom: 0.75rem;
}

.node-card-docs {
    color: #00ff88;
    font-size: 0.8rem;
}

.node-card-docs.none {
    color: #666;
}

.domain-nav {
    text-align: center;
    padding: 2rem;
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
}
</style>`;

// Build nodes grid HTML
var nodesHtml = '';
nodes.forEach(function(node) {
    var nodeTitle = node.id.replace(/_/g, ' ');
    var nodeEssence = (node.essence || 'No essence').replace(/_/g, ' ');
    var docsClass = node.documentCount === 0 ? 'none' : '';
    var docsText = node.documentCount + ' document' + (node.documentCount === 1 ? '' : 's');

    nodesHtml += '<a href="/node/' + node.id + '" class="node-card">' +
        '<div class="node-card-title">' + nodeTitle + '</div>' +
        '<div class="node-card-type">' + node.type + '</div>' +
        '<div class="node-card-essence">"' + nodeEssence + '"</div>' +
        '<div class="node-card-docs ' + docsClass + '">' + docsText + '</div>' +
        '</a>';
});

var body = css +
'<div class="domain-detail-header">' +
'    <div class="domain-detail-icon">' + (domain.icon || 'â—‡') + '</div>' +
'    <h1 class="domain-detail-title">' + domain.label + '</h1>' +
'    <p class="domain-detail-description">' + domain.description + '</p>' +
'    <div class="domain-stats-bar">' +
'        <div class="stat">' +
'            <div class="stat-value">' + nodes.length + '</div>' +
'            <div class="stat-label">Nodes</div>' +
'        </div>' +
'        <div class="stat">' +
'            <div class="stat-value">' + totalDocuments + '</div>' +
'            <div class="stat-label">Documents</div>' +
'        </div>' +
'    </div>' +
'</div>' +
'<div class="nodes-grid">' + nodesHtml + '</div>' +
'<div class="domain-nav">' +
'    <a href="/domains" class="btn">All Domains</a>' +
'    <a href="/" class="btn">Arrival</a>' +
'    <a href="/search" class="btn">Search</a>' +
'</div>';
%>
<%- include('layout', { title: title, body: body }) %>
